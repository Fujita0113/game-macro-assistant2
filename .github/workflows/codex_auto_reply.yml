name: Claude Code Auto Reply

on:
  issues:
    types: [opened, edited]

jobs:
  auto-reply:
    if: contains(github.event.issue.labels.*.name, 'ask-codex')
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
      
    - name: Claude Code Auto Response
      uses: actions/github-script@v7
      with:
        github-token: ${{ secrets.GITHUB_TOKEN }}
        script: |
          const issueBody = context.payload.issue.body;
          const issueTitle = context.payload.issue.title;
          
          // å®šå‹çš„ãªå›ç­”ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
          const replyMessage = `
          ## ğŸ¤– Claude Code AI ã«ã‚ˆã‚‹è‡ªå‹•å›ç­”
          
          ã”è³ªå•ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ç¾åœ¨ã€ä»¥ä¸‹ã®æƒ…å ±ã«åŸºã¥ã„ã¦å›ç­”ã‚’æº–å‚™ä¸­ã§ã™ï¼š
          
          **è³ªå•ã‚¿ã‚¤ãƒˆãƒ«**: ${issueTitle}
          
          ### ğŸ“‹ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—
          1. é–¢é€£ã™ã‚‹ã‚³ãƒ¼ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ã¨è¦ä»¶å®šç¾©ã‚’åˆ†æ
          2. æŠ€è¡“çš„ãªå®Ÿè£…ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’æ¤œè¨  
          3. C# / WPF / MVVM ãƒ‘ã‚¿ãƒ¼ãƒ³ã«åŸºã¥ãå›ç­”ã‚’ç”Ÿæˆ
          4. ãƒ†ã‚¹ãƒˆå¯èƒ½ãªå®Ÿè£…ä¾‹ã‚’æä¾›
          
          ### â±ï¸ äºˆæƒ³å›ç­”æ™‚é–“
          é€šå¸¸ 5-10 åˆ†ä»¥å†…ã«è©³ç´°ãªæŠ€è¡“å›ç­”ã‚’ã‚³ãƒ¡ãƒ³ãƒˆã§æä¾›ã—ã¾ã™ã€‚
          
          ### ğŸ“š å‚è€ƒãƒªã‚½ãƒ¼ã‚¹
          - [è¦ä»¶å®šç¾© v3.3](../docs/requirement.md)
          - [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ](../docs/architecture.md)
          - [é–‹ç™ºè¨ˆç”»](../development_plan.md)
          
          ---
          *ã“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ GitHub Actions ã«ã‚ˆã‚Šè‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã—ãŸ*
          `;
          
          // Issue ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¿½åŠ 
          await github.rest.issues.createComment({
            owner: context.repo.owner,
            repo: context.repo.repo,
            issue_number: context.issue.number,
            body: replyMessage
          });
          
          // ãƒ©ãƒ™ãƒ«ã‚’è¿½åŠ 
          await github.rest.issues.addLabels({
            owner: context.repo.owner,
            repo: context.repo.repo, 
            issue_number: context.issue.number,
            labels: ['ai-processing']
          });